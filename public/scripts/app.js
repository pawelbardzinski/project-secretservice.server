// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  angular.module('app', ['ui.router', 'ngCookies', 'ngAnimate', 'ui.bootstrap', 'easypiechart', 'mgo-angular-wizard', 'textAngular', 'ui.tree', 'ngMap', 'ngTagsInput', 'angular-intro', 'angularFileUpload', 'app.controllers', 'app.directives', 'app.localization', 'app.nav', 'app.task', 'app.user', 'app.product', 'app.venue', 'app.order', 'app.confirmation', 'app.ui.services']).config([
    '$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {
      var access;
      access = routingConfig.accessLevels;
      $stateProvider.state('public', {
        abstract: true,
        template: "<ui-view/>",
        data: {
          access: access["public"]
        }
      }).state('public.signin', {
        url: '/signin',
        templateUrl: 'views/system/signin.html',
        controller: 'SignInCtrl'
      }).state('public.signout', {
        url: '/signout',
        controller: 'SignOutCtrl'
      }).state('public.forgotpassword', {
        url: '/forgot-password',
        controller: 'ForgotPasswordCtrl',
        templateUrl: 'views/system/forgot-password.html'
      }).state('public.resetpassword', {
        url: '/resetpassword/:token',
        controller: 'ResetPasswordCtrl',
        templateUrl: 'views/system/reset-password.html'
      });
      $stateProvider.state('admin', {
        abstract: true,
        template: "<ui-view/>",
        data: {
          access: access.admin
        }
      }).state('admin.venues', {
        url: '/venues',
        templateUrl: 'views/venue/venues.html',
        controller: 'VenuesCtrl',
        data: {
          access: access.venues
        }
      }).state('admin.orders', {
        url: '/orders',
        templateUrl: 'views/order/orders.html',
        controller: 'OrdersCtrl',
        data: {
          access: access.venues
        }
      });
      $stateProvider.state('venue', {
        abstract: true,
        template: "<ui-view/>"
      }).state('venue.profile', {
        url: '/venueprofile',
        templateUrl: 'views/venue/venue-profile.html',
        controller: 'VenueProfileCtrl',
        data: {
          access: access.venueprofile
        }
      }).state('venue.users', {
        url: '/users',
        templateUrl: 'views/users/users.html',
        controller: 'UsersCtrl',
        data: {
          access: access.users
        }
      }).state('venue.products', {
        url: '/products',
        templateUrl: 'views/products/products.html',
        controller: 'ProductsCtrl',
        data: {
          access: access.products
        }
      });
      return $urlRouterProvider.otherwise('/users');
    }
  ]).run(function($rootScope, $state, Auth, $http) {
    $rootScope.$on("$stateChangeStart", function(event, toState, toParams, fromState, fromParams) {
      if (!Auth.authorize(toState.data.access)) {
        $rootScope.error = "Seems like you tried accessing a route you don't have access to...";
        event.preventDefault();
        if (fromState.url === '^') {
          if (Auth.isLoggedIn()) {
            return $state.go('venue.users');
          } else {
            $rootScope.error = null;
            return $state.go('public.signin');
          }
        }
      }
    });
    $http.defaults.headers.common['x-application-id'] = 'com.secret-service.admin';
    return $http.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
  });

}).call(this);

//# sourceMappingURL=app.js.map

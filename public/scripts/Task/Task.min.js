(function(){"use strict";angular.module("app.task",[]).factory("taskStorage",function(){var t,n;return n="tasks",t='[ {"title": "Finish homework", "completed": true}, {"title": "Make a call", "completed": true}, {"title": "Build a snowman :)", "completed": false}, {"title": "Apply for monster university!", "completed": false}, {"title": "Play games with friends", "completed": true}, {"title": "Shopping", "completed": false} ]',{get:function(){return JSON.parse(localStorage.getItem(n)||t)},put:function(t){return localStorage.setItem(n,JSON.stringify(t))}}}).directive("taskFocus",["$timeout",function(n){return{link:function(t,i,r){return t.$watch(r.taskFocus,function(t){if(t)return n(function(){return i[0].focus()},0,!1)})}}}]).controller("taskCtrl",["$scope","taskStorage","filterFilter","$rootScope","logger",function(n,t,i,r,u){var f;return f=n.tasks=t.get(),n.newTask="",n.remainingCount=i(f,{completed:!1}).length,n.editedTask=null,n.statusFilter={completed:!1},n.filter=function(t){switch(t){case"all":return n.statusFilter="";case"active":return n.statusFilter={completed:!1};case"completed":return n.statusFilter={completed:!0}}},n.add=function(){var i;if(i=n.newTask.trim(),i.length!==0)return f.push({title:i,completed:!1}),u.logSuccess('New task: "'+i+'" added'),t.put(f),n.newTask="",n.remainingCount++},n.edit=function(t){return n.editedTask=t},n.doneEditing=function(i){return n.editedTask=null,i.title=i.title.trim(),i.title?u.log("Task updated"):n.remove(i),t.put(f)},n.remove=function(i){var r;return n.remainingCount-=i.completed?0:1,r=n.tasks.indexOf(i),n.tasks.splice(r,1),t.put(f),u.logError("Task removed")},n.completed=function(i){return n.remainingCount+=i.completed?-1:1,t.put(f),i.completed?n.remainingCount>0?n.remainingCount===1?u.log("Almost there! Only "+n.remainingCount+" task left"):u.log("Good job! Only "+n.remainingCount+" tasks left"):u.logSuccess("Congrats! All done :)"):void 0},n.clearCompleted=function(){return n.tasks=f=f.filter(function(n){return!n.completed}),t.put(f)},n.markAll=function(i){return f.forEach(function(n){return n.completed=i}),n.remainingCount=i?0:f.length,t.put(f),i?u.logSuccess("Congrats! All done :)"):void 0},n.$watch("remainingCount == 0",function(t){return n.allChecked=t}),n.$watch("remainingCount",function(n){return r.$broadcast("taskRemaining:changed",n)})}])}).call(this);
/*
//# sourceMappingURL=Task.min.js.map
*/
// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  angular.module('app.directives', ['app.services']).directive('imgHolder', [
    function() {
      return {
        restrict: 'A',
        link: function(scope, ele, attrs) {
          return Holder.run({
            images: ele[0]
          });
        }
      };
    }
  ]).directive('customPage', function() {
    return {
      restrict: "A",
      controller: [
        '$scope', '$element', '$location', function($scope, $element, $location) {
          var addBg, path;
          path = function() {
            return $location.path();
          };
          addBg = function(path) {
            var length;
            $element.removeClass('body-wide body-lock');
            length = path.length;
            if (path.lastIndexOf('/') === (length - 1)) {
              path = path.substring(0, path.length - 1);
            }
            switch (path) {
              case '/404':
              case '/system/404':
              case '/system/500':
              case '/signin':
              case '/system/signin':
              case '/system/signup':
              case '/forgot-password':
              case '/resetpassword':
              case '/resetpassword':
                $element.addClass('body-wide');
                break;
              case path.indexOf('/resetpassword') > -1:
                $element.addClass('body-wide');
                break;
              case '/pages/lock-screen':
                $element.addClass('body-wide body-lock');
            }
            if (path.indexOf('/resetpassword') > -1) {
              return $element.addClass('body-wide');
            }
          };
          addBg($location.path());
          return $scope.$watch(path, function(newVal, oldVal) {
            if (newVal === oldVal) {
              return;
            }
            return addBg($location.path());
          });
        }
      ]
    };
  }).directive('uiColorSwitch', [
    function() {
      return {
        restrict: 'A',
        link: function(scope, ele, attrs) {
          return ele.find('.color-option').on('click', function(event) {
            var $this, hrefUrl, style;
            $this = $(this);
            hrefUrl = void 0;
            style = $this.data('style');
            if (style === 'loulou') {
              hrefUrl = 'styles/main.css';
              $('link[href^="styles/main"]').attr('href', hrefUrl);
            } else if (style) {
              style = '-' + style;
              hrefUrl = 'styles/main' + style + '.css';
              $('link[href^="styles/main"]').attr('href', hrefUrl);
            } else {
              return false;
            }
            return event.preventDefault();
          });
        }
      };
    }
  ]).directive('goBack', [
    function() {
      return {
        restrict: "A",
        controller: [
          '$scope', '$element', '$window', function($scope, $element, $window) {
            return $element.on('click', function() {
              return $window.history.back();
            });
          }
        ]
      };
    }
  ]).directive('accessLevel', [
    'Auth', function(Auth) {
      return {
        restrict: 'A',
        link: function($scope, element, attrs) {
          var accessLevel, prevDisp, updateCSS;
          prevDisp = element.css('display');
          accessLevel = null;
          $scope.$watch('currentUser', function(currentUser) {
            return updateCSS();
          }, true);
          attrs.$observe('accessLevel', function(al) {
            if (al) {
              accessLevel = $scope.$eval(al);
            }
            return updateCSS();
          });
          return updateCSS = function() {
            var userRole;
            userRole = Auth.getCurrentUser().role;
            if (userRole) {
              if (!Auth.authorize(accessLevel, userRole)) {
                return element.css('display', 'none');
              } else {
                return element.css('display', prevDisp);
              }
            }
          };
        }
      };
    }
  ]);

}).call(this);

//# sourceMappingURL=directives.js.map
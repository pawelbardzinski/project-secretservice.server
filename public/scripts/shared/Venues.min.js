(function(){var t,n;n=angular.module("app.venue",["app.services"]);n.controller("VenuesCtrl",["$scope","$filter","VenueModalProvider","VenueService","Auth","ConfirmationProvider","uiHelper",function(n,t,i,r,u,f,e){var s,o;return n.searchKeywords="",n.filteredVenues=[],n.row="",n.select=function(t){var r,i;return i=(t-1)*n.numPerPage,r=i+n.numPerPage,n.currentPageStores=n.filteredVenues.slice(i,r)},n.onFilterChange=function(){return n.select(1),n.currentPage=1,n.row=""},n.onNumPerPageChange=function(){return n.select(1),n.currentPage=1},n.onOrderChange=function(){return n.select(1),n.currentPage=1},n.search=function(){return n.filteredVenues=t("filter")(n.venues,n.searchKeywords),n.onFilterChange()},n.order=function(i){if(n.row!==i)return n.row=i,n.filteredVenues=t("orderBy")(n.venues,i),n.onOrderChange()},n.numPerPageOpt=[3,5,10,20],n.numPerPage=n.numPerPageOpt[2],n.currentPage=1,n.currentPageStores=[],o=function(){return r.query(null,function(t){return n.venues=t,s()})},s=function(){return n.search(),n.select(n.currentPage)},o(),n.edit=function(n){return i.Create(n.id).result.then(function(){return o()})},n["delete"]=function(t){return f.Create("Are you sure you want to delete venue: "+t.name+"?").result.then(function(){return r["delete"]({id:t.id},function(){return o()},function(t){return e.handleApiError(n,t)})})},n.add=function(){return i.Create(0).result.then(function(){return o()})}}]);n.controller("VenueProfileCtrl",["$scope","$filter","VenueService","Auth","uiHelper",function(n,t,i,r,u){var f;return f=r.getCurrentUser().venue_id,n.states=u.states,r.getCurrentUser().venue_id>0?i.get({id:r.getCurrentUser().venue_id},function(t){return n.venue=t}):i["new"](null,function(t){return n.venue=t}),n.save=function(){var t;return f=n.venue.id,t=f===0?i.post(n.venue):i.put({id:n.venue.id},n.venue),t.$promise.then(function(t){return u.showSavedSuccess(),n.venue=t})["catch"](function(t){return u.handleApiError(n,t)})}}]);t=function(n,t,i,r,u,f,e){return n.Title="Venue Management",n.states=f.states,e>0?r.get({id:e},function(t){return n.venue=t}):r["new"](function(t){return n.venue=t}),n.save=function(){var i;return i=e===0?r.post(n.venue):r.put({id:n.venue.id},n.venue),i.$promise.then(function(i){return n.venue=i,f.showSavedSuccess(),t.close()})["catch"](function(t){return f.handleApiError(n,t)})},n.cancel=function(){return t.dismiss("close")}};n.controller("VenueModalCtrl",["$scope","$modalInstance","$filter","VenueService","Auth","uiHelper","venueId",function(n,i,r,u,f,e,o){return new t(n,i,r,u,u,f,e,o)}]);n.factory("VenueModalProvider",["$modal",function(n){var i;return i={},i.Create=function(i){return n.open({templateUrl:"/views/venue/venue-modal.html",controller:t,controllerAs:"VenueModalCtrl",size:"lg",resolve:{venueId:function(){return i}}})},i}])}).call(this);
/*
//# sourceMappingURL=Venues.min.js.map
*/
